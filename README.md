
# gRPC Demo
This repo includes a source for a gRPC C++ server and a gRPC Java client.
It includes a Spring boot app that exposes a RESTful API to set Personal Info of a user. The service takes the payload, enriches it with a timestamp, 
and sets it in-memory in a C++ server fronted by gRPC. When the C++ server sets it, it prints a log indicating that. The client receives a NoContent response code if all goes well.

## The structure
- *protos* includes the gRPC service definition 
- *person-service* includes the Java source code for the REST service and gRPC client
- *cpp* includes the C++ gRPC server
- *proto-common* includes the gRPC interface classes generated by *protoc*

## Build Java Client
The Java client can be built with Maven. I haven't used the **maven protobuf plugin** though because I wanted the proto to be shared with ease between 
the client and the server

## Build C++ Server
To build the C++ server you can use cmake as follows:
```
$ mkdir -p cmake/build
$ pushd cmake/build
$ cmake -DCMAKE_PREFIX_PATH=$MY_INSTALL_DIR ../..
$ make -j 4
```

## Screenshots

### Calling REST service using Postman
<img width="636" alt="Screenshot 2023-09-06 124115" src="https://github.com/shahramatrian/UserService/assets/2606110/89f774da-099a-4edf-adb7-4b93936645f3">

### Logs on server

<img width="278" alt="Screenshot 2023-09-06 124137" src="https://github.com/shahramatrian/UserService/assets/2606110/6b4fd5b4-566e-4806-a9d2-3e00a2efbf1f">

## UML diagrams
Simplified sequence diagram:

```mermaid
sequenceDiagram
Rest Client ->> Spring Boot Service: Add a User
Spring Boot Service-->>PersonLoggerClient: sendPersonalInfo
PersonLoggerClient-->>PersonLoggerServer: logPersonalInfo
PersonLoggerServer-->>PersonLoggerClient: sendResponse
